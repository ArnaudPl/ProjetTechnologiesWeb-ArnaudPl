webpackJsonp([1],{"2iGu":function(e,t){},BxZl:function(e,t){},NHnr:function(e,t,o){"use strict";function n(e){o("Q+vl")}function i(e){o("m+Oq")}function s(e){o("ZOfV")}function a(e){o("iPV9")}function r(e){o("BxZl")}function l(e){o("X0HE")}function d(e){o("2iGu")}function u(e){o("vgDX")}Object.defineProperty(t,"__esModule",{value:!0});var c=o("7+uW"),m=o("3EgV"),v=o.n(m),f=(o("QCv7"),o("mvHQ")),p=o.n(f),h={data:function(){return{dark:!0,settingsDialog:!1,drawer:!0,menuItems:[{icon:"home",title:"Tableau de bord",to:"/home"},{icon:"school",title:"Gestion des notes",to:"/notes"},{icon:"event",title:"Gestion des modules",to:"/modules/add"}],miniVariant:!0,mobile:!1,noModule:!1}},created:function(){var e=this;this.noModule=null===localStorage.getItem("modules"),this.$router.beforeEach(function(t,o,n){(e.noModule||"Ajout de module"===o.name)&&(e.noModule=null===localStorage.getItem("modules")),"Ajout de module"===t.name?(e.noModule=!1,n()):e.noModule?n({name:"Ajout de module"}):n()}),this.onResize(),this.mobile&&(this.drawer=!1);var t=localStorage.getItem("dark");null===t?(localStorage.setItem("dark","true"),this.dark=!0):this.dark="true"===t},mounted:function(){this.mobile&&(this.drawer=!1)},methods:{setBasicsData:function(){var e=[{name:"613-1 Analyse des organisations",description:"",UE:[{name:"613-1.1 Progiciels de gestion intégrés",description:"",coefficient:"2",id:1,notes:[{value:4,date:1515939904971}]},{name:"613-1.3 Gestion des processus métier (BPM)",description:"",coefficient:"1",id:2,notes:[]}],id:1},{name:"613-2 Indicateurs de performance",description:"",UE:[{name:"613-2.1 Comptabilité analytique",description:"",coefficient:"1",id:1,notes:[{value:6,date:1516023728398}]},{name:"613-2.2 Statistiques",description:"",coefficient:"1",id:2,notes:[]},{name:"613-2.3 Cockpit d'entreprise",description:"",coefficient:"1",id:3,notes:[]}],id:2},{name:"623-1 Implémentation du SI",description:"",UE:[{name:"623-1.1 Méthodologie",description:"",coefficient:"1",id:1,notes:[{value:2,date:1516023734352}]},{name:"623-1.2 Modélisation avancée des données",description:"",coefficient:"1",id:2}],id:3},{name:"633-1 Algorithmes et structures de données",description:"",UE:[{name:"633-1.1 Structures de données avancées",description:"",coefficient:"1",id:1,notes:[{value:3.95,date:1516023743218}]},{name:"633-1.2 Programmation de bases de données",description:"",coefficient:"1",id:2}],id:4},{name:"633-2 Architectures distribuées",description:"",UE:[{name:"633-2.1 Applications et services réseaux",description:"",coefficient:"2",id:1},{name:"633-2.2 Dialogue avec la base de données",description:"",coefficient:"1",id:2}],id:5},{name:"643-1 Choix d'école 1",description:"",UE:[{name:"643-1.1 Projet de technologies web de présentation",description:"",coefficient:"1",id:1}],id:6},{name:"Module sans UE",description:"",id:7,UE:[],notes:[]}];localStorage.setItem("modules",p()(e)),alert("Données pour la présentation correctement chargées")},onResize:function(){this.mobile=this.isMobile(),this.mobile?(this.miniVariant=!1,this.drawer=!1):(this.drawer=!0,this.miniVariant=!0)},isMobile:function(){return this.$vuetify.breakpoint.mdAndDown},toggleTheme:function(){var e=this.dark?"true":"false";localStorage.setItem("dark",e)}}},g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],attrs:{dark:e.dark}},[o("v-navigation-drawer",{staticStyle:{display:"flex","flex-direction":"column","padding-bottom":"0"},attrs:{temporary:e.mobile,fixed:"","mini-variant":e.miniVariant,app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[o("v-list",e._l(e.menuItems,function(t,n){return o("v-list-tile",{key:n,attrs:{to:t.to,ripple:""}},[o("v-list-tile-action",[o("v-icon",{domProps:{innerHTML:e._s(t.icon)}})],1),e._v(" "),o("v-list-tile-content",[o("v-list-tile-title",{domProps:{textContent:e._s(t.title)}})],1)],1)})),e._v(" "),o("v-spacer"),e._v(" "),o("v-list",[o("v-list-tile",{on:{click:function(t){e.settingsDialog=!0}}},[o("v-list-tile-action",[o("v-icon",[e._v("settings")])],1),e._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[e._v("Paramètres")])],1)],1)],1)],1),e._v(" "),o("v-toolbar",{attrs:{app:"",extended:""}},[o("v-btn",{directives:[{name:"show",rawName:"v-show",value:!this.mobile,expression:"!this.mobile"}],attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.miniVariant=!e.miniVariant}}},[o("v-icon",{domProps:{innerHTML:e._s(e.miniVariant?"chevron_right":"chevron_left")}})],1),e._v(" "),o("v-btn",{directives:[{name:"show",rawName:"v-show",value:this.mobile,expression:"this.mobile"}],attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}},[o("v-icon",[e._v("menu")])],1),e._v(" "),o("v-toolbar-title",{domProps:{textContent:e._s(this.$root.projectTitle)}}),e._v(" "),o("v-toolbar-title",{staticClass:"pl-2 primary--text",attrs:{slot:"extension"},slot:"extension"},[e._v(e._s(this.$root.pageTitle))])],1),e._v(" "),o("v-content",[o("v-container",{attrs:{fluid:""}},[o("v-slide-y-transition",{attrs:{mode:"out-in"}},[o("v-layout",{attrs:{column:""}},[o("router-view")],1)],1)],1)],1),e._v(" "),o("v-footer",{attrs:{app:""}},[o("span",[e._v("© 2017")]),e._v(" "),o("v-spacer"),e._v(" "),o("span",[e._v("Tiago Rodrigues & Arnaud Plumez")]),e._v(" "),o("v-spacer"),e._v(" "),o("span",[e._v("HE-Arc Gestion")])],1),e._v(" "),o("v-dialog",{attrs:{"max-width":"600",fullscreen:e.$vuetify.breakpoint.xsOnly},model:{value:e.settingsDialog,callback:function(t){e.settingsDialog=t},expression:"settingsDialog"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Paramètres de l'application")]),e._v(" "),o("v-card-text",[o("v-switch",{attrs:{label:"Utiliser le thème sombre ?"},on:{change:e.toggleTheme},model:{value:e.dark,callback:function(t){e.dark=t},expression:"dark"}}),e._v(" "),o("v-btn",{attrs:{block:"",color:"error"},on:{click:e.setBasicsData}},[e._v("Ajouter les données de base")])],1),e._v(" "),o("v-card-actions",[o("v-btn",{attrs:{color:"error",block:""},on:{click:function(t){e.settingsDialog=!1}}},[e._v("Fermer cette fenêtre")])],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"600",fullscreen:e.$vuetify.breakpoint.xsOnly},model:{value:e.noModule,callback:function(t){e.noModule=t},expression:"noModule"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Aucun module n'a été trouvé")]),e._v(" "),o("v-card-text",[o("p",[e._v("Il semblerait que ça soit la première fois que vous soyez sur l'application."),o("br"),e._v("Commencez tout d'abord par ajouter un module.")])]),e._v(" "),o("v-card-actions",[o("v-btn",{attrs:{color:"error",block:""},on:{click:function(t){"Ajout de module"===e.$route.name?e.noModule=!1:e.$router.push({name:"Ajout de module"})}}},[e._v("Ajouter un module")])],1)],1)],1)],1)},_=[],E={render:g,staticRenderFns:_},x=E,U=o("VU/8"),b=n,y=U(h,x,!1,b,null,null),M=y.exports,w=o("/ocq"),k={data:function(){return{organizedModules:[],selectedModule:-1,selectedUE:-1,noteSimulee:null,noteSimuleeRules:[function(e){return parseFloat(e)>=1&&parseFloat(e)<=6&&(100*parseFloat(e)).toFixed(10)%5/100==0||"La note doit être entre 1 et 6 et être un multiple de 0.05"}],moduleWithNewNote:[],sortOrder:"moyenne-asc",alert:{type:"",text:"",show:!1}}},methods:{getFormattedModules:function(e){var t=[];return e.forEach(function(e){var o=[],n={};if(n.id=e.id,n.name=e.name,e.UE&&e.UE.length>0){e.UE.forEach(function(e){var t={};if(t.id=e.id,t.name=e.name,t.coefficient=e.coefficient,e.notes&&e.notes.length>0){var n=0;e.notes.forEach(function(e){n+=parseFloat(e.value)}),t.moyenne=(n/e.notes.length).toFixed(2)}o.push(t)}),n.UE=o;var i=[];o.forEach(function(e){if(e.moyenne)for(var t=0;t<=parseFloat(e.coefficient);t+=.05)i.push(parseFloat(e.moyenne))});var s=0;i.forEach(function(e){s+=parseFloat(e)}),n.moyenne=(s/i.length).toFixed(2),t.push(n)}else{if(e.notes&&e.notes.length>0){var a=0;e.notes.forEach(function(e){a+=parseFloat(e.value)}),n.moyenne=(a/e.notes.length).toFixed(2)}t.push(n)}}),t},handleNewNote:function(){var e=this;if(this.moduleWithNewNote=[],!0===this.noteSimuleeRules[0](this.noteSimulee)&&-1!==this.selectedModule){var t=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"));if(this.nbOfUEInSelectedModule>1&&-1!==this.selectedUE)t.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).notes||(t.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).notes=[]),t.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).notes.push({value:this.noteSimulee});else{if(0!==this.nbOfUEInSelectedModule)return;t.find(function(t){return t.id===e.selectedModule}).notes.push({value:this.noteSimulee})}t=this.getFormattedModules([t.find(function(t){return t.id===e.selectedModule})]),this.moduleWithNewNote=t}},setAlert:function(e,t){var o=this;this.alert.type=e,this.alert.text=t,this.alert.show=!0,setTimeout(function(){o.$scrollTo("#alertBox")},10)}},computed:{nbOfUEInSelectedModule:function(){var e=this;return this.organizedModules.length>0&&void 0!==this.organizedModules.find(function(t){return t.id===e.selectedModule}).UE?this.organizedModules.find(function(t){return t.id===e.selectedModule}).UE.length:0},sortedArray:function(){function e(e,t){return isNaN(e.moyenne)?1:isNaN(t.moyenne)?-1:parseFloat(e.moyenne)>parseFloat(t.moyenne)?1:parseFloat(e.moyenne)<parseFloat(t.moyenne)?-1:0}function t(e,t){return isNaN(e.moyenne)?1:isNaN(t.moyenne)?-1:parseFloat(e.moyenne)>parseFloat(t.moyenne)?-1:parseFloat(e.moyenne)<parseFloat(t.moyenne)?1:0}function o(e,t){return e.name>t.name?1:e.name<t.name?-1:0}function n(e,t){return e.name<t.name?1:e.name>t.name?-1:0}if(this.organizedModules.length>0){var i=[];switch(this.sortOrder){case"date-asc":i=this.organizedModules.sort(function(e,t){return e.id-t.id});break;case"date-desc":i=this.organizedModules.sort(function(e,t){return t.id-e.id});break;case"moyenne-asc":i=this.organizedModules.sort(e);break;case"moyenne-desc":i=this.organizedModules.sort(t);break;case"nom-asc":i=this.organizedModules.sort(o);break;case"nom-desc":i=this.organizedModules.sort(n)}return this.$nextTick(function(){this.$redrawVueMasonry()}),i}}},mounted:function(){var e=this;this.$on("delete-module",function(t){var o=e.organizedModules.find(function(e){return e.id===t}).name;if(confirm("Etes-vous certain de vouloir supprimer le module : "+o+" ? \nCette action est irréversible.")){var n=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"));n.forEach(function(e,o){e.id===t&&n.splice(o,1)}),localStorage.setItem("modules",p()(n)),e.setAlert("success","Module correctement supprimé !"),e.organizedModules=e.getFormattedModules(null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules")))}else e.setAlert("info","Le module n'a pas été supprimé.")}),this.organizedModules=this.getFormattedModules(null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules")))},beforeRouteUpdate:function(e,t,o){"Tableau de bord"===e.name&&(this.organizedModules=this.getFormattedModules(null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules")))),o()}},S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",{attrs:{"grid-list-md":"",fluid:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[e.alert.show?o("v-flex",{attrs:{id:"alertBox",xs12:"",md8:"","offset-md2":""}},[o("v-alert",{attrs:{dismissible:"",type:e.alert.type,transition:"scale-transition"},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(e._s(e.alert.text))])],1):e._e(),e._v(" "),o("v-flex",{attrs:{xs12:"",lg10:"","offset-lg1":"","mb-3":""}},[o("v-card",[o("v-card-title",{attrs:{"primary-title":""}},[o("h2",[e._v("Simulateur de notes")])]),e._v(" "),o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",lg6:""}},[o("h4",[e._v("\n                                    Choisissez un module :\n                                ")]),e._v(" "),o("v-select",{attrs:{items:e.organizedModules,"item-text":"name","item-value":"id"},on:{input:e.handleNewNote},model:{value:e.selectedModule,callback:function(t){e.selectedModule=t},expression:"selectedModule"}}),e._v(" "),-1!==e.selectedModule&&e.nbOfUEInSelectedModule>0?o("div",[o("h4",[e._v("\n                                        Choisissez une unité d'enseignement :\n                                    ")]),e._v(" "),o("v-select",{attrs:{items:e.organizedModules.find(function(t){return t.id===e.selectedModule}).UE,"item-text":"name","item-value":"id"},on:{input:e.handleNewNote},model:{value:e.selectedUE,callback:function(t){e.selectedUE=t},expression:"selectedUE"}})],1):e._e(),e._v(" "),o("h4",[e._v("\n                                    Note à simuler :\n                                ")]),e._v(" "),o("v-text-field",{attrs:{rules:e.noteSimuleeRules},on:{input:e.handleNewNote},model:{value:e.noteSimulee,callback:function(t){e.noteSimulee=t},expression:"noteSimulee"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",lg6:""}},[-1!==e.selectedModule?o("div",{staticClass:"text-xs-center"},[o("div",{staticClass:"titre-moyenne"},[e._v("Moyenne du module :")]),e._v(" "),o("div",{staticClass:"moyenne",class:(parseFloat(e.organizedModules.find(function(t){return t.id===e.selectedModule}).moyenne)<4?"red":4===parseFloat(e.organizedModules.find(function(t){return t.id===e.selectedModule}).moyenne)?"yellow":"green")+"--text"},[e._v(e._s(isNaN(e.organizedModules.find(function(t){return t.id===e.selectedModule}).moyenne)?"Aucune note n'a été ajoutée":e.organizedModules.find(function(t){return t.id===e.selectedModule}).moyenne))])]):e._e(),e._v(" "),-1!==e.selectedModule&&e.nbOfUEInSelectedModule>0&&-1!==e.selectedUE?o("div",{staticClass:"text-xs-center mt-3"},[o("div",{staticClass:"titre-moyenne"},[e._v("Moyenne de l'unité d'enseignement :")]),e._v(" "),o("div",{staticClass:"moyenne",class:(parseFloat(e.organizedModules.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).moyenne)<4?"red":4===parseFloat(e.organizedModules.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).moyenne)?"yellow":"green")+"--text"},[e._v(e._s(isNaN(e.organizedModules.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).moyenne)?"Aucune note n'a été ajoutée":e.organizedModules.find(function(t){return t.id===e.selectedModule}).UE.find(function(t){return t.id===e.selectedUE}).moyenne))])]):e._e(),e._v(" "),e.moduleWithNewNote.length>0?o("div",{staticClass:"text-xs-center mt-3"},[o("v-divider",{staticClass:"mb-3"}),e._v(" "),o("div",{staticClass:"titre-moyenne"},[e._v("Moyenne simulée du module :")]),e._v(" "),o("div",{staticClass:"moyenne",class:(parseFloat(e.moduleWithNewNote[0].moyenne)<4?"red":4===parseFloat(e.moduleWithNewNote[0].moyenne)?"yellow":"green")+"--text"},[e._v(e._s(e.moduleWithNewNote[0].moyenne))])],1):e._e(),e._v(" "),e.moduleWithNewNote.length>0&&e.nbOfUEInSelectedModule>0&&-1!==e.selectedUE?o("div",{staticClass:"text-xs-center mt-3"},[o("div",{staticClass:"titre-moyenne"},[e._v("Moyenne simulée de l'unité d'enseignement :")]),e._v(" "),o("div",{staticClass:"moyenne",class:(parseFloat(e.moduleWithNewNote[0].UE.find(function(t){return t.id===e.selectedUE}).moyenne)<4?"red":4===parseFloat(e.moduleWithNewNote[0].UE.find(function(t){return t.id===e.selectedUE}).moyenne)?"yellow":"green")+"--text"},[e._v(e._s(e.moduleWithNewNote[0].UE.find(function(t){return t.id===e.selectedUE}).moyenne))])]):e._e()])],1)],1)],1)],1),e._v(" "),o("v-flex",{staticClass:"text-xs-center mb-3",attrs:{xs12:""}},[o("h3",{staticClass:"mb-2"},[e._v("Ordre de tri des modules")]),e._v(" "),o("v-btn-toggle",{style:e.$vuetify.breakpoint.smAndDown?"display: inline-block":"",attrs:{mandatory:""},model:{value:e.sortOrder,callback:function(t){e.sortOrder=t},expression:"sortOrder"}},[o("v-btn",{style:e.$vuetify.breakpoint.smAndDown?"display: block; width: 100%;":"",attrs:{flat:"",value:"date-asc"}},[o("span",[e._v("Date d'ajout")]),e._v(" "),o("v-icon",[e._v("keyboard_arrow_up")])],1),e._v(" "),o("v-btn",{style:e.$vuetify.breakpoint.smAndDown?"display: block; width: 100%;":"",attrs:{flat:"",value:"date-desc"}},[o("span",[e._v("Date d'ajout")]),e._v(" "),o("v-icon",[e._v("keyboard_arrow_down")])],1),e._v(" "),o("v-btn",{style:e.$vuetify.breakpoint.smAndDown?"display: block; width: 100%;":"",attrs:{flat:"",value:"moyenne-asc"}},[o("span",[e._v("Moyenne")]),e._v(" "),o("v-icon",[e._v("keyboard_arrow_up")])],1),e._v(" "),o("v-btn",{style:e.$vuetify.breakpoint.smAndDown?"display: block; width: 100%;":"",attrs:{flat:"",value:"moyenne-desc"}},[o("span",[e._v("Moyenne")]),e._v(" "),o("v-icon",[e._v("keyboard_arrow_down")])],1),e._v(" "),o("v-btn",{style:e.$vuetify.breakpoint.smAndDown?"display: block; width: 100%;":"",attrs:{flat:"",value:"nom-asc"}},[o("span",[e._v("Nom")]),e._v(" "),o("v-icon",[e._v("keyboard_arrow_up")])],1),e._v(" "),o("v-btn",{style:e.$vuetify.breakpoint.smAndDown?"display: block; width: 100%;":"",attrs:{flat:"",value:"nom-desc"}},[o("span",[e._v("Nom")]),e._v(" "),o("v-icon",[e._v("keyboard_arrow_down")])],1)],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-layout",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{row:"",wrap:"","transition-duration":"0.3s","item-selector":".item","column-width":".grid-sizer"}},[o("v-flex",{staticClass:"grid-sizer",staticStyle:{width:"100%","margin-bottom":"-8px"},attrs:{xs12:"",md6:"",lg4:"",xl3:""}}),e._v(" "),e._l(e.sortedArray,function(t){return o("v-flex",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:t.id,staticClass:"item",staticStyle:{width:"100%"},attrs:{xs12:"",md6:"",lg4:"",xl3:""}},[o("v-card",{class:isNaN(t.moyenne)?"":parseFloat(t.moyenne)<4?"red black--text":4===parseFloat(t.moyenne)?"yellow black--text":"green"},[o("v-card-title",[o("span",{staticClass:"nom-module"},[e._v(e._s(t.name))]),o("v-spacer"),o("span",{staticClass:"moyenne-module"},[e._v(e._s(isNaN(t.moyenne)?"Pas encore de notes":"Moyenne : "+t.moyenne))])],1),e._v(" "),t.UE?o("v-divider",{class:parseFloat(t.moyenne)<=4?"grey darken-3":""}):e._e(),e._v(" "),t.UE?o("v-card-text",e._l(t.UE,function(n,i){return o("div",{key:n.id},[o("div",{staticClass:"ml-2 nom-ue"},[e._v(e._s(n.name))]),e._v(" "),o("div",{staticClass:"ml-4 coefficient-ue"},[e._v("Coefficient : "+e._s(n.coefficient))]),e._v(" "),o("div",{staticClass:"ml-4 moyenne-ue"},[e._v(e._s(isNaN(n.moyenne)?"Pas encore de notes":"Moyenne : "+n.moyenne))]),e._v(" "),i!==t.UE.length-1?o("v-divider",{staticClass:"mb-2 mt-2",class:parseFloat(t.moyenne)<=4?"grey darken-3":""}):e._e()],1)})):e._e(),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},on:{click:function(o){e.$router.push({path:"/modules/"+parseInt(t.id)+"/edit"})}},slot:"activator"},[o("v-icon",{class:isNaN(t.moyenne)?"":parseFloat(t.moyenne)<=4?"black--text":""},[e._v("edit")])],1),e._v(" "),o("span",[e._v("Modifier le module")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},nativeOn:{click:function(o){e.$emit("delete-module",t.id)}},slot:"activator"},[o("v-icon",{class:isNaN(t.moyenne)?"":parseFloat(t.moyenne)<=4?"black--text":""},[e._v("delete_forever")])],1),e._v(" "),o("span",[e._v("Supprimer le module")])],1)],1)],1)],1)})],2)],1)],1)],1)],1)},N=[],F={render:S,staticRenderFns:N},$=F,A=o("VU/8"),I=i,C=A(k,$,!1,I,null,null),z=C.exports,V={data:function(){return{header:[{text:"",value:"icon",align:"center",sortable:!1},{text:"Module",value:"module",align:"left"},{text:"Unité",value:"ue",align:"left"},{text:"Note",value:"note",align:"right",sortable:!1},{text:"Date",value:"date",align:"center"},{text:"",value:"actions",sortable:!1}],pagination:null,modules:null,notesHistory:[]}},methods:{getNotes:function(){function e(e,t){return e.date<t.date?1:e.date>t.date?-1:0}var t=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules")),o=[];t.forEach(function(e){e.UE&&null!==e.UE&&0!==e.UE.length?e.UE.forEach(function(t){t.notes&&t.notes.length>0&&t.notes.forEach(function(n){n.module=e.name,n.ue=t.name,o.push(n)})}):e.notes&&e.notes.length>0&&e.notes.forEach(function(t){t.module=e.name,o.push(t)})}),o.sort(e),this.notesHistory=o},deleteSelectedNote:function(e){if(confirm("Êtes-vous sûr(e) de vous vouloir supprimer cette note ?")){var t=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"));t.forEach(function(t){t.name===e.module&&(e.ue?t.UE.forEach(function(t){t.name===e.ue&&t.notes.forEach(function(o){if(o.value===e.value&&o.date===e.date){delete e.ue,delete e.module;var n=t.notes.indexOf(e);t.notes.splice(n,1)}})}):t.notes.forEach(function(o){if(o.value===e.value&&o.date===e.date){delete e.module;var n=t.notes.indexOf(e);t.notes.splice(n,1)}}))}),localStorage.setItem("modules",p()(t)),this.getNotes()}}},mounted:function(){var e=this;this.$on("delete-note",function(t){e.deleteSelectedNote(t)}),this.getNotes()},beforeRouteUpdate:function(e,t,o){this.getNotes(),o()},filters:{toReadableDate:function(e){if(!e)return"Pas de date";var t=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],o=new Date(e);return e=o.getDate()+" "+t[o.getMonth()]+" "+o.getFullYear()}}},j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",["Notes"===this.$route.name?o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-subheader",[e._v("Historique des notes ajoutées")]),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{pagination:e.pagination,"rows-per-page-text":"Notes par page :",items:e.notesHistory,"item-key":"date",headers:e.header,"disable-initial-sort":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",[o("v-icon",{attrs:{color:t.item.value>4?"green":4==t.item.value?"yellow":"red"}},[e._v(e._s(t.item.value>4?"thumb_up":4==t.item.value?"thumbs_up_down":"thumb_down"))])],1),e._v(" "),o("td",[e._v("\n                        "+e._s(t.item.module)+"\n                    ")]),e._v(" "),o("td",[e._v("\n                        "+e._s(t.item.ue?t.item.ue:"-")+"\n                    ")]),e._v(" "),o("td",{staticClass:"text-xs-right"},[e._v("\n                        "+e._s(t.item.value)+"\n                    ")]),e._v(" "),o("td",{staticClass:"text-xs-center"},[e._v("\n                        "+e._s(e._f("toReadableDate")(t.item.date))+"\n                    ")]),e._v(" "),o("td",[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},nativeOn:{click:function(o){e.$emit("delete-note",t.item)}},slot:"activator"},[o("v-icon",[e._v("delete_forever")])],1),e._v(" "),o("span",[e._v("Supprimer la note")])],1)],1)]}}])},[o("template",{slot:"no-data"},[e._v("\n                    Aucune note n'a été ajoutée\n                ")])],2),e._v(" "),o("v-btn",{staticClass:"mt-4",attrs:{block:"",color:"accent",to:{name:"Ajout de note"}}},[e._v("Ajouter une note")])],1)],1):e._e(),e._v(" "),o("router-view")],1)},D=[],O={render:j,staticRenderFns:D},R=O,T=o("VU/8"),L=s,P=T(V,R,!1,L,"data-v-44d960cc",null),q=P.exports,H={data:function(){return{alert:{type:"",text:"",show:!1},modules:[],noteValid:!1,selectedModule:-1,selectData:[],note:1,selectModuleRules:[function(e){return!!e&&-1!==e||"Le choix d'un module est obligatoire"}],noteRules:[function(e){return!!e||"Ce champ est obligatoire"},function(e){return e&&parseFloat(e)>=1&&parseFloat(e)<=6&&(100*parseFloat(e)).toFixed(10)%5==0||"La valeur doit être comprise entre 1 et 6 et être un multiple de 0.05"}]}},computed:{getSelectedUECoefficient:function(){var e=this;return this.modules.find(function(t){return t.id===e.selectedModule.moduleId}).UE.find(function(t){return t.id===e.selectedModule.UEId}).coefficient}},methods:{setAlert:function(e,t){var o=this;this.alert.type=e,this.alert.text=t,this.alert.show=!0,setTimeout(function(){o.$scrollTo("#alertBox")},10)},isFirstModuleWithUE:function(e){var t=!1;return this.selectUE.forEach(function(o){o.id===e&&o.UE&&(t=!0)}),t},getDataForSelectModules:function(){var e=[];return this.modules.forEach(function(t){e.push({header:t.name}),t.UE&&t.UE.length>0?t.UE.forEach(function(o){e.push({moduleId:t.id,moduleName:t.name,UEId:o.id,UEName:o.name})}):e.push({moduleId:t.id,moduleName:t.name})}),e},returnModulesFromStorage:function(){var e=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"));return e.forEach(function(e){e.UE||(e.UE=[])}),e},addNote:function(){var e=this;if(this.$refs.noteForm.validate()){var t=parseFloat(this.note),o=this.returnModulesFromStorage();o.forEach(function(o){o.id===e.selectedModule.moduleId&&(e.selectedModule.UEId?o.UE.forEach(function(o){o.id===e.selectedModule.UEId&&(o.notes||(o.notes=[]),o.notes.push({value:t,date:Date.now()}))}):(o.notes||(o.notes=[]),o.notes.push({value:t,date:Date.now()})))}),localStorage.setItem("modules",p()(o)),this.$refs.noteForm.reset(),this.selectedModule=-1,this.note=1,this.setAlert("success","La note a été ajoutée avec succès !")}else this.setAlert("error","Veuillez corriger les erreurs du formulaire")}},mounted:function(){this.modules=this.returnModulesFromStorage(),this.selectData=this.getDataForSelectModules()}},J=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",{attrs:{"grid-list-lg":""}},[e.alert.show?o("v-flex",{attrs:{id:"alertBox",xs12:"",md8:"","offset-md2":""}},[o("v-alert",{attrs:{dismissible:"",type:e.alert.type,transition:"scale-transition"},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(e._s(e.alert.text))])],1):e._e(),e._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{ref:"noteForm",model:{value:e.noteValid,callback:function(t){e.noteValid=t},expression:"noteValid"}},[o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-select",{attrs:{items:e.selectData,label:"Choix du module",rules:e.selectModuleRules,"cache-items":""},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v("\n                                "+e._s(t.item.UEId?t.item.moduleName+" | "+t.item.UEName:t.item.moduleName)+"\n                            ")]}},{key:"item",fn:function(t){return["object"!=typeof t.item?[o("v-list-tile-content",{staticClass:"ml-2",domProps:{textContent:e._s(t.item)}})]:t.item.UEId?[o("v-list-tile-content",{staticClass:"ml-2",domProps:{textContent:e._s(t.item.UEName)}})]:[o("v-list-tile-content",{staticClass:"ml-2",domProps:{textContent:e._s(t.item.moduleName)}})]]}}]),model:{value:e.selectedModule,callback:function(t){e.selectedModule=t},expression:"selectedModule"}})],1),e._v(" "),o("v-flex",{attrs:{xs8:"","offset-xs2":"",md6:"","offset-md3":"",lg4:"","offset-lg4":"",xl2:"","offset-xl5":""}},[o("v-text-field",{attrs:{box:"",label:"Note",hint:"Valeur entre 1 et 6","persistent-hint":"",rules:e.noteRules,required:""},model:{value:e.note,callback:function(t){e.note="string"==typeof t?t.trim():t},expression:"note"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("v-btn",{attrs:{color:"accent"},on:{click:e.addNote}},[e._v("Ajouter la note")])],1)],1)],1)],1)],1)],1)},W=[],B={render:J,staticRenderFns:W},G=B,Q=o("VU/8"),X=a,Z=Q(H,G,!1,X,"data-v-6a7bafd4",null),Y=Z.exports,K={data:function(){return{modules:null}},created:function(){this.modules=localStorage.getItem("modules")},beforeRouteEnter:function(e,t,o){o(function(e){null===e.modules&&e.$router.push({name:"Ajout de module"})})}},ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("router-view")],1)},te=[],oe={render:ee,staticRenderFns:te},ne=oe,ie=o("VU/8"),se=r,ae=ie(K,ne,!1,se,"data-v-7db43759",null),re=ae.exports,le={data:function(){var e=this;return{module:{id:-1,name:"",description:"",hasUE:!1},tmpUE:{id:-1,name:"",description:"",coefficient:1},headers:[{text:"Nom de l'unité",value:"name",align:"left"},{text:"Description",value:"description",align:"left",sortable:!1},{text:"Coefficient",value:"coefficient",align:"right"},{text:"Actions",value:"actions",align:"center",sortable:!1}],UE:[],editMode:!1,confirm:!1,alert:{type:"",text:"",show:!1},moduleValid:!1,UEValid:!0,moduleNameRules:[function(e){return!!e||"Le nom du module est obligatoire"},function(e){return e&&e.length<=100||"Le nom doit être inférieur ou égal à 100 caractères"},function(t){return e.isModuleNameUnique(e.module.id,t)||"Le nom ne peut pas avoir déjà été utilisé pour un autre module"}],moduleDescriptionRules:[function(e){return e.length<=255||"La description ne peut pas contenir plus de 255 caractères"}],UENameRules:[function(e){return!!e||"Le nom de l'unité est obligatoire"},function(e){return e.length<=100||"Le nom doit être inférieur ou égal à 100 caractères"},function(t){return e.isUENameUnique(e.module.id,e.tmpUE.id,t)||"Une seule unité d'enseignement peut avoir ce nom dans ce module"}],UEDescriptionRules:[function(e){return e.length<=255||"La description ne peut pas contenir plus de 255 caractères"}],UECoefficientRules:[function(e){return parseFloat(e)>=.1&&parseFloat(e)<=10&&(100*parseFloat(e)).toFixed(10)%5/100==0||"Le coefficient doit être entre 0.1 et 10 et être un multiple de 0.05"}]}},methods:{isModuleNameUnique:function(e,t){if(""===t)return!0;var o=!0;return(null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"))).forEach(function(n){n.name===t&&n.id!==e&&(o=!1)}),o},isUENameUnique:function(e,t,o){if(""===o)return!0;var n=!0;if(-1!==e){(null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"))).forEach(function(i){i.id===e&&i.UE&&i.UE.forEach(function(e){e.name===o&&e.id!==t&&(n=!1)})})}else this.UE.forEach(function(e){e.name===o&&e.id!==t&&(n=!1)});return n},setAlert:function(e,t){var o=this;this.alert.type=e,this.alert.text=t,this.alert.show=!0,setTimeout(function(){o.$scrollTo("#alertBox")},10)}}},de={mixins:[le],methods:{submitModule:function(){var e=!1;this.$refs.moduleForm.validate()&&(this.module.hasUE?(this.$refs.UEForm.validate()||this.UE.length>0)&&(e=!0):e=!0),e?this.module.hasUE&&""!==(this.tmpUE.name||this.tmpUE.description)?this.confirm=!0:this.addModuleToLocalStorage():this.setAlert("error","Veuillez corriger les erreurs du formulaire.")},submitUE:function(){if(this.$refs.UEForm.validate()){var e=0;e=this.UE.length&&this.UE[this.UE.length-1].id?this.UE[this.UE.length-1].id+1:1,this.UE.push({name:this.tmpUE.name,description:this.tmpUE.description,coefficient:this.tmpUE.coefficient.length?this.tmpUE.coefficient:"1",id:e}),this.$refs.UEForm.reset(),this.tmpUE.name="",this.tmpUE.description="",this.tmpUE.coefficient=1,this.setAlert("success","Unité d'enseignement ajoutée !")}else this.setAlert("error","Veuillez corriger les erreurs du formulaire.")},editUE:function(){var e=this;this.$refs.UEForm.validate()?(this.UE.forEach(function(t){t.id===e.tmpUE.id&&(t.name=e.tmpUE.name,t.description=e.tmpUE.description,t.coefficient=e.tmpUE.coefficient)}),this.editMode=!1,this.tmpUE={name:"",description:"",coefficient:1,id:-1},this.setAlert("success","Unité correctement modifiée !")):this.setAlert("error","Veuillez corriger les erreurs du formulaire.")},cancelEditUE:function(){this.editMode=!1,this.tmpUE={name:"",description:"",coefficient:1,id:-1},this.setAlert("info","L'unité n'a pas été modifiée")},addModuleToLocalStorage:function(){var e={name:this.module.name,description:this.module.description};this.module.hasUE&&(e.UE=this.UE);var t=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules")),o=void 0;o=0===t.length?0:t[t.length-1].id?parseInt(t[t.length-1].id):0,e.id=o+1,t.push(e),localStorage.setItem("modules",p()(t)),this.$refs.moduleForm.reset(),this.$refs.UEForm.reset(),this.module.name="",this.module.description="",this.tmpUE.name="",this.tmpUE.description="",this.tmpUE.coefficient=1,this.UE=[],this.setAlert("success","Module correctement ajouté ! Vous pouvez en ajouter un nouveau maintenant.")}},mounted:function(){var e=this;this.$on("delete-UE",function(t){e.UE.forEach(function(o,n){o.id===t.id&&e.UE.splice(n,1),e.setAlert("info","Unité d'enseignement supprimée")})}),this.$on("edit-UE",function(t){e.editMode=!0,e.tmpUE={name:t.name,description:t.description,coefficient:t.coefficient,id:t.id}})},beforeRouteLeave:function(e,t,o){var n=!1;if((""!==this.module.name||""!==this.module.description||this.UE.length>0)&&(n=!0),!n&&this.module.hasUE&&(""===this.tmpUE.name&&""===this.tmpUE.description||(n=!0)),n){window.confirm("Voulez-vous vraiment quitter sans sauvegarder les changements ?")?o():o(!1)}else o()}},ue=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",{attrs:{"grid-list-lg":""}},[e.alert.show?o("v-flex",{attrs:{id:"alertBox",xs12:"",md8:"","offset-md2":""}},[o("v-alert",{attrs:{dismissible:"",type:e.alert.type,transition:"scale-transition"},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(e._s(e.alert.text))])],1):e._e(),e._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{ref:"moduleForm",model:{value:e.moduleValid,callback:function(t){e.moduleValid=t},expression:"moduleValid"}},[o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-text-field",{attrs:{box:"",autofocus:"",label:"Nom du module",counter:100,required:"",rules:e.moduleNameRules},model:{value:e.module.name,callback:function(t){e.$set(e.module,"name","string"==typeof t?t.trim():t)},expression:"module.name"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-text-field",{attrs:{box:"",textarea:"",label:"Description du module",counter:255,rules:e.moduleDescriptionRules},model:{value:e.module.description,callback:function(t){e.$set(e.module,"description","string"==typeof t?t.trim():t)},expression:"module.description"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-checkbox",{attrs:{label:"Est-ce que ce module est composé d'unités d'enseignement ?"},model:{value:e.module.hasUE,callback:function(t){e.$set(e.module,"hasUE",t)},expression:"module.hasUE"}}),e._v(" "),o("v-divider",{directives:[{name:"show",rawName:"v-show",value:e.module.hasUE,expression:"module.hasUE"}]})],1)],1)],1),e._v(" "),o("v-flex",{directives:[{name:"show",rawName:"v-show",value:e.module.hasUE,expression:"module.hasUE"}],attrs:{xs12:""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-form",{ref:"UEForm",model:{value:e.UEValid,callback:function(t){e.UEValid=t},expression:"UEValid"}},[o("v-flex",{attrs:{xs12:""}},[o("v-subheader",[e._v(e._s(e.editMode?"Modifier l'":"Ajouter une ")+"unité d'enseignement")])],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{box:"",label:"Nom de l'unité d'enseignement",counter:100,required:e.module.hasUE,rules:e.UENameRules},model:{value:e.tmpUE.name,callback:function(t){e.$set(e.tmpUE,"name","string"==typeof t?t.trim():t)},expression:"tmpUE.name"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{box:"",textarea:"",label:"Description",counter:255,rules:e.UEDescriptionRules},model:{value:e.tmpUE.description,callback:function(t){e.$set(e.tmpUE,"description","string"==typeof t?t.trim():t)},expression:"tmpUE.description"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{box:"",label:"Coefficient",hint:"Valeur entre 0.1 et 10","persistent-hint":"",rules:e.UECoefficientRules},model:{value:e.tmpUE.coefficient,callback:function(t){e.$set(e.tmpUE,"coefficient","string"==typeof t?t.trim():t)},expression:"tmpUE.coefficient"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("v-btn",{attrs:{color:"accent"},on:{click:function(t){e.editMode?e.editUE():e.submitUE()}}},[e._v(e._s(e.editMode?"Modifier":"Ajouter"))]),e._v(" "),o("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],attrs:{flat:"",color:"primary"},on:{click:e.cancelEditUE}},[e._v("Annuler")])],1)],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md6:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-subheader",[e._v("Liste des unités d'enseignement")])],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"hide-actions":"",items:e.UE,"item-key":"name",headers:e.headers},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",[e._v(e._s(t.item.name))]),e._v(" "),o("td",[e._v(e._s(t.item.description?t.item.description:"-"))]),e._v(" "),o("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.coefficient))]),e._v(" "),o("td",{staticClass:"text-xs-right"},[o("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.tmpUE.id!==t.item.id,expression:"tmpUE.id !== props.item.id"}],attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},nativeOn:{click:function(o){e.$emit("edit-UE",t.item)}},slot:"activator"},[o("v-icon",[e._v("edit")])],1),e._v(" "),o("span",[e._v("Modifier l'unité")])],1),e._v(" "),o("v-tooltip",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}],attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},nativeOn:{click:function(o){e.$emit("delete-UE",t.item)}},slot:"activator"},[o("v-icon",[e._v("delete_forever")])],1),e._v(" "),o("span",[e._v("Supprimer l'unité")])],1)],1)]}}])},[o("template",{slot:"no-data"},[e._v("\n                                        Aucune unité d'enseignement pour l'instant\n                                    ")])],2)],1)],1)],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("v-btn",{attrs:{color:"accent"},on:{click:e.submitModule}},[e._v("Sauvegarder")])],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"600",fullscreen:e.$vuetify.breakpoint.xsOnly},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Annuler l'ajout de l'unité d'enseignement ?")]),e._v(" "),o("v-card-text",[e._v("Vous n'avez pas ajouté l'unité d'enseignement que vous êtiez en train de saisir."),o("br"),e._v("Souhaitez-vous continuer la saisie ?")]),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"primary",flat:""},nativeOn:{click:function(t){e.confirm=!1,e.addModuleToLocalStorage()}}},[e._v("Annuler la saisie")]),e._v(" "),o("v-btn",{attrs:{color:"accent",flat:""},nativeOn:{click:function(t){e.confirm=!1}}},[e._v("Oui")])],1)],1)],1)],1)},ce=[],me={render:ue,staticRenderFns:ce},ve=me,fe=o("VU/8"),pe=l,he=fe(de,ve,!1,pe,"data-v-6de40e93",null),ge=he.exports,_e={mixins:[le],data:function(){return{module:{id:-1,name:"",description:"",UE:[]},noModule:!1,infoAlertSelectUE:!0,editUE:!1}},methods:{editModule:function(){this.$refs.moduleForm.validate()?this.editModuleInLocalStorage():this.setAlert("error","Veuillez corriger les erreurs du formulaire.")},cancelEditModule:function(){this.editUE=!1,this.getModuleInStorage(),this.setAlert("info","Les valeurs de base ont été remises.")},editModuleInLocalStorage:function(){var e=this,t=this.returnModulesFromStorage();t.forEach(function(t,o,n){t.id===e.module.id&&(n[o].name=e.module.name,n[o].description=e.module.description)}),localStorage.setItem("modules",p()(t)),this.$refs.moduleForm.reset(),this.setAlert("success","Module correctement modifié !")},openUEForm:function(e){"edit"!==e&&(this.tmpUE={name:"",description:"",coefficient:"",id:-1}),this.editUE=!0},submitUE:function(){-1===this.tmpUE.id?this.addUE():this.editSelectedUE(),this.getModuleInStorage()},addUE:function(){var e=this,t=this.returnModulesFromStorage(),o={name:this.tmpUE.name,description:this.tmpUE.description,coefficient:this.tmpUE.coefficient};t.forEach(function(t){t.id===e.module.id&&(0===t.UE.length?o.id=1:o.id=t.UE[t.UE.length-1].id?parseInt(t.UE[t.UE.length-1].id+1):1,t.UE.push(o))}),localStorage.setItem("modules",p()(t)),this.setAlert("success","Unité d'enseignement correctement ajoutée !")},editSelectedUE:function(){var e=this,t=this.returnModulesFromStorage(),o={name:this.tmpUE.name,description:this.tmpUE.description,coefficient:this.tmpUE.coefficient,id:this.tmpUE.id};t.forEach(function(t){t.id===e.module.id&&t.UE.forEach(function(t,n,i){t.id===e.tmpUE.id&&(t.notes&&(o.notes=t.notes),i[n]=o)})}),localStorage.setItem("modules",p()(t)),this.setAlert("success","Unité d'enseignement correctement modifiée !")},deleteSelectedUE:function(e){var t=this;if(!confirm("Êtes-vous sûr(e) de vous vouloir supprimer l'unité : "+e.name+" ?"))return void this.setAlert("info","L'unité n'a pas été supprimée !");var o=this.returnModulesFromStorage();o.forEach(function(o,n){o.id===t.module.id&&o.UE.forEach(function(t,n,i){t.id===e.id&&o.UE.splice(n,1)})}),localStorage.setItem("modules",p()(o)),this.setAlert("success","Unité d'enseignement correctement supprimée !"),this.getModuleInStorage()},getModuleInStorage:function(){var e=this;this.returnModulesFromStorage().forEach(function(t){t.id===parseInt(e.$route.params.id)&&(e.module=t)}),-1===this.module.id&&(this.noModule=!0)},returnModulesFromStorage:function(){var e=null===localStorage.getItem("modules")?[]:JSON.parse(localStorage.getItem("modules"));return e.forEach(function(e){e.UE||(e.UE=[])}),e}},mounted:function(){var e=this;this.getModuleInStorage(),this.$on("delete-UE",function(t){e.deleteSelectedUE(t)}),this.$on("edit-UE",function(t){e.tmpUE={name:t.name,description:t.description,coefficient:t.coefficient,id:t.id},e.openUEForm("edit")})}},Ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",{attrs:{"grid-list-lg":""}},[e.alert.show?o("v-flex",{attrs:{id:"alertBox",xs12:"",md8:"","offset-md2":""}},[o("v-alert",{attrs:{dismissible:"",type:e.alert.type,transition:"scale-transition"},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(e._s(e.alert.text))])],1):e._e(),e._v(" "),o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{ref:"moduleForm",model:{value:e.moduleValid,callback:function(t){e.moduleValid=t},expression:"moduleValid"}},[o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-text-field",{attrs:{box:"",autofocus:"",label:"Nom du module",counter:100,required:"",rules:e.moduleNameRules},model:{value:e.module.name,callback:function(t){e.$set(e.module,"name","string"==typeof t?t.trim():t)},expression:"module.name"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-text-field",{attrs:{box:"",textarea:"",label:"Description du module",counter:255,rules:e.moduleDescriptionRules},model:{value:e.module.description,callback:function(t){e.$set(e.module,"description","string"==typeof t?t.trim():t)},expression:"module.description"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("v-btn",{attrs:{color:"accent"},on:{click:e.editModule}},[e._v("Sauvegarder")]),e._v(" "),o("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.cancelEditModule}},[e._v("Annuler")])],1),e._v(" "),o("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[o("v-divider")],1)],1)],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-layout",[o("v-flex",{attrs:{xs12:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-subheader",[e._v("Liste des unités d'enseignement")])],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-data-table",{staticClass:"elevation-1",attrs:{"hide-actions":"",items:e.module.UE,"item-key":"name",headers:e.headers},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",[e._v(e._s(t.item.name))]),e._v(" "),o("td",[e._v(e._s(t.item.description.length?t.item.description:"-"))]),e._v(" "),o("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.coefficient))]),e._v(" "),o("td",{staticClass:"text-xs-right"},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},nativeOn:{click:function(o){e.$emit("edit-UE",t.item)}},slot:"activator"},[o("v-icon",[e._v("edit")])],1),e._v(" "),o("span",[e._v("Modifier l'unité")])],1),e._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{attrs:{slot:"activator",flat:"",icon:""},nativeOn:{click:function(o){e.$emit("delete-UE",t.item)}},slot:"activator"},[o("v-icon",[e._v("delete_forever")])],1),e._v(" "),o("span",[e._v("Supprimer l'unité")])],1)],1)]}}])},[o("template",{slot:"no-data"},[e._v("\n                                    Aucune unité d'enseignement pour ce module\n                                ")])],2)],1),e._v(" "),o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("v-btn",{attrs:{color:"accent"},on:{click:function(t){e.openUEForm("add")}}},[e._v("Ajouter une unité")])],1)],1)],1)],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"600",fullscreen:e.$vuetify.breakpoint.xsOnly},model:{value:e.noModule,callback:function(t){e.noModule=t},expression:"noModule"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Aucun module ne correspond à cette adresse.")]),e._v(" "),o("v-card-text",[e._v("Cliquez sur le bouton pour retourner à la page d'accueil.")]),e._v(" "),o("v-card-actions",[o("v-btn",{attrs:{color:"error",block:""},on:{click:function(t){e.$router.push({name:"Tableau de bord"})}}},[e._v("Retourner à l'accueil")])],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"600",fullscreen:e.$vuetify.breakpoint.smAndDown},model:{value:e.editUE,callback:function(t){e.editUE=t},expression:"editUE"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Edition d'une unité d'enseignement")]),e._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-form",{ref:"UEForm",model:{value:e.UEValid,callback:function(t){e.UEValid=t},expression:"UEValid"}},[o("v-flex",{attrs:{xs12:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{box:"",label:"Nom de l'unité d'enseignement",counter:100,required:e.module.hasUE,rules:e.UENameRules},model:{value:e.tmpUE.name,callback:function(t){e.$set(e.tmpUE,"name","string"==typeof t?t.trim():t)},expression:"tmpUE.name"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{box:"",textarea:"",label:"Description",counter:255,rules:e.UEDescriptionRules},model:{value:e.tmpUE.description,callback:function(t){e.$set(e.tmpUE,"description","string"==typeof t?t.trim():t)},expression:"tmpUE.description"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{box:"",label:"Coefficient",hint:"Valeur entre 0.1 et 10","persistent-hint":"",rules:e.UECoefficientRules},model:{value:e.tmpUE.coefficient,callback:function(t){e.$set(e.tmpUE,"coefficient","string"==typeof t?t.trim():t)},expression:"tmpUE.coefficient"}})],1)],1)],1)],1)],1)],1)],1),e._v(" "),o("v-card-actions",[o("v-btn",{attrs:{color:"error",block:"",disabled:!e.UEValid},on:{click:function(t){e.submitUE(),e.editUE=!1}}},[e._v(e._s(e.UEValid?-1===e.tmpUE.id?"Ajouter":"Sauvegarder":"Corrigez le formulaire"))]),e._v(" "),o("v-btn",{attrs:{color:"primary",block:"",flat:""},on:{click:function(t){e.editUE=!1,-1===e.tmpUE.id?e.setAlert("info","L'unité n'a pas été ajoutée"):e.setAlert("info","L'unité n'a pas été modifiée")}}},[e._v("Annuler")])],1)],1)],1)],1)},xe=[],Ue={render:Ee,staticRenderFns:xe},be=Ue,ye=o("VU/8"),Me=d,we=ye(_e,be,!1,Me,"data-v-41c1b558",null),ke=we.exports,Se={},Ne=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-container",{attrs:{"grid-list-lg":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("h1",[e._v("La page demandée n'a pas été trouvée")]),e._v(" "),o("v-btn",{attrs:{large:"",error:"",to:{name:"Tableau de bord"}}},[e._v("Retourner au tableau de bord")])],1)],1)],1)],1)},Fe=[],$e={render:Ne,staticRenderFns:Fe},Ae=$e,Ie=o("VU/8"),Ce=u,ze=Ie(Se,Ae,!1,Ce,"data-v-1c7a7117",null),Ve=ze.exports;c.a.use(w.a);var je=new w.a({routes:[{path:"/",redirect:{name:"Tableau de bord"}},{path:"/home",name:"Tableau de bord",component:z,meta:{title:"Tableau de bord"}},{path:"/notes",name:"Notes",component:q,meta:{title:"Gestion des notes"},children:[{path:"add",name:"Ajout de note",component:Y,meta:{title:"Ajout d'une note"}}]},{path:"/modules",name:"Modules",component:re,meta:{title:"Gestion des modules"},children:[{path:"add",name:"Ajout de module",component:ge,meta:{title:"Ajout d'un module"}},{path:":id/edit",name:"Modification de module",component:ke,meta:{title:"Modification d'un module"}}]},{path:"*",name:"Erreur 404",component:Ve,meta:{title:"Erreur 404"}}]}),De=o("bm7V"),Oe=o.n(De),Re=o("w/U7"),Te=o("162o");c.a.use(Oe.a),c.a.use(Re.a),c.a.use(v.a,{theme:{primary:"#666",secondary:"#9e9e9e",accent:"#E53935",error:"#D50000",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}),c.a.config.productionTip=!1,new c.a({el:"#app",router:je,template:'<div><div :style="loading ? \'max-height: 100vh; max-width: 100vw; overflow: hidden;\' : \'\'"><div :style="loading ? \'display: flex;\' : \'display: none;\'" style="width: 100vw; height: 100vh; z-index: 101; background: rgba(0, 0, 0, .5); position: absolute; justify-content: center; align-items: center;"><v-progress-circular indeterminate :size="100" color="accent" style="z-index: 102;"></v-progress-circular></div></div><App/></div>',components:{App:M},data:function(){return{projectTitle:"Gestion de Haute École",pageTitle:"",loading:!1}},created:function(){var e=this;this.pageTitle=this.$route.meta.title,document.title=this.projectTitle,this.$router.beforeEach(function(t,o,n){window.scrollTo(0,0),null!==localStorage.getItem("modules")&&(e.loading=!0),Object(Te.setTimeout)(function(){n()},10)}),this.$router.afterEach(function(t,o){e.loading=!1})},watch:{$route:function(e,t){this.pageTitle=e.meta.title,document.title=this.projectTitle+" | "+this.pageTitle}}})},"Q+vl":function(e,t){},QCv7:function(e,t){},X0HE:function(e,t){},ZOfV:function(e,t){},iPV9:function(e,t){},"m+Oq":function(e,t){},vgDX:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.619b7282873d62c4471a.js.map